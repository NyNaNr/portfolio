---
title: "Yu’s portfolioを支える技術"
created_at: "2023-07-24"
updated_at: "2023-07-25"
description: "このポートフォリオサイトを作る時の試行錯誤を書いています。"
tags: ["tech", "web", "nextjs"]
---

## はじめに
この記事では、このポートフォリオサイトを作るにあたって使用した技術と機能（できること）、工夫したことについて書きます。

https://github.com/NyNaNr/portfolio

## 目次
- [使用した技術](#技術選定)
- [機能（できること）](#機能（できること）)
- [工夫したこと](#工夫したこと)

### 技術選定
このポートフォリオを作るにあたって以下の技術を使用しています。
- Next.js(App Router)
- TypeScript
- Tailwind CSS
- Docker
- Node.js

#### Next.js & 苦悩
このポートフォリオサイトを作る前に、Random Name Appというアプリを作成しました。

以下に紹介URLを貼る
アプリサイト
Qiita
Git 

Random Name Appを作成し始めた当時、最新のNext.jsは13.3.0で、App RouterがStableになる前の世界でした。

初めてのWebアプリをなんとか作り上げて、完成の喜びに浸たり
、さて同じ要領でポートフォリオサイトも作ろう！と意気込んでいたところでした。

Next.jsが、13.4でApp Routerがstableになり前回作ったアプリの知識だけでは通用しなくなってしましました。

バージョンを下げて使用する考えもあったのですが、『エンジニアたるものキャッチアップをするべき』という考えに至り、自分の成長の為と最新の13.4.3のApp Routerを使用することを決意しました。

当時は、App Routerが出てきたばかりで解説記事が大変少なく苦労したのを覚えています。そんな時に公式のドキュメントを何度も読み込み、自身のアプリに適用させていきました。（以前なら日本語化されたドキュメントや解説ブログを読んでいたのですが）公式のドキュメントを読みながらキャッチアップしていく習慣を身につけることができました。

### 機能（できること）
- 記事をMarkdownで書ける。
- レスポンシブ対応
- ダークモード切り替え
- コンタクトフォーム・メールの送信
- 

#### 記事をMarkdownで書ける
Markdown を HTML に変換するライブラリreact-markdownを使用しています。

レンダリング時にどのような表示にするかCSSで指定できるので、書式を揃えて表示したい時ぬに非常に便利です。

また、Next.jsのDynamic Routesを利用することで、Markdown形式のファイルを追加するとファイル名からルートが作成されます。

https://nextjs.org/docs/pages/building-your-application/routing/dynamic-routes

MarkdownをHTMLに変換する際にかなりこだわったのが、リンクカードです。

↓これがリンクカードです。URLを貼るとこのように表示されます。

https://yur-portfolio.vercel.app

Server Componentsを使うことで、APIをサーバーで事前に叩けます。ポートフォリオサイトにアクセスした時点で、リンク先のtitleやimage,descriptionなどのOGPがpre-fetchされます。ページの表示速度の貢献につながります。

#### レスポンシブ対応
スマホが普及している現在、レスポンシブ対応は必須だと思います。
レスポンシブ対応を考えるのは前作アプリを含め、2回目なのでかなり慣れてきたように感じます。

今回、苦戦したことがあります。
他のサイトを閲覧しているとiPhoneの表示領域が画面いっぱいに広がるのに、自分のポートフォリオサイトは、ノッチの部分を避けて小さく表示されているのが大変気になりました。

`viewport-fit=cover`を追加することで解決できたかのように思ったのですが、今度は『UI がノッチやアクションバーと被ってしまう』問題に直面しました。ただ単にマージンを変えるだけだと、ノッチの有無に関わらずマージンが適用されてしまい思い通りのUIにできませんでした。

調べてみると、
セーフエリアを考慮に入れることで、解決できそうだと分かりました。

ちなみにTailwind CSSでセーフエリアを設定するためには
`tailwindcss-safe-area`というプラグインを導入する必要があります。

無事にノッチの有無でUIを変更することができました。

振り返りながらこの記事を書いていると偶然以下のサイトを見つけました。

https://zenn.dev/yuta_ike/articles/responsive_layout

今回悩んだこともまとめられており、いい復習になりました。

#### ダークモード切り替え



#### コンタクトフォーム・メールの送信

react-hook-formとsendgrid/mailを使用しました。

react-hook-formでバリデーションチェックをして、sendgrid/mailで、APIを通してお問い合わせ内容が私自身と、お問い合わせした方にメールで届くようになっています。


https://sendgrid.kke.co.jp/

sendgrid/mailは、メルカリやNoteといった名だたるサービスも使用しています。
さらに月12000通まで無料で使用することができます。

### 工夫したこと
- 第一印象
- 配色

####　第一印象
このポートフォリオサイトを開いて一番初めに表示されるものをインパクトのあるものにしようと考えました。

心理学では初頭効果と言い、最初に示された特性が印象に残りやすく、後の評価に大きな影響を与えるものなのです。